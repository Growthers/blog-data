---
title: "Blog作成にあたって"
date: 2021-12-15
---

この記事は[共同開発鯖 Advent Calender 2021](https://qiita.com/advent-calendar/2021/growthers)の15日目の記事です.  

いま見ているこのBlogを突貫工事で作成し2週間ほど経ったので, 振り返りつつ記事を書いていきたいと思います.  

## 開発概要  

Blogの最低限の機能の作成とデプロイまで  

|開発期間|開発メンバー|
|:-:|:-:|
|約2週間|4人|

## 作成の経緯  

あまり覚えていませんが, アドベント・カレンダーに合わせてBlogを作成できたらいいよねという話から始まった気がします.  
11月の頭あたりにそういった話があった気がしますが, 私を含めほとんどの人が11月は試験期間だったためすぐには開発は始まりませんでした.  

## 技術選定と環境構築  

### 技術選定  

このBlogは以下で作成されています.  
- Next.js / React
- Tailwind CSS
- SCSS

全く開発が進んでいないこの共同開発鯖のサイトで`React/Next.js`が選ばれていたこと, `Vue/Nuxt.js`が書ける人がいないことなどから, ~~独断で~~スムーズにフレームワークは決定できました.  

開発メンバーの1人が[Tailwind CSS](https://tailwindcss.com/)を使いたいとのことだったので採用しましたが, スタイルは全くやってくれませんでした...  

### 環境構築  

技術選定後, 環境構築はメンバーの1人にほとんどを担当してもらいました.  

- ESLintの導入
- Pritterの導入
- Jestの導入
- Storybookの導入
- CI設定
- Editorconfigの設定

お陰でスムーズな開発ができたと思います.  

## 記事表示部分の実装  

### 実装内容  

このBlogのデータは`data`というディレクトリに保存されています.  
このディレクリはBlogとは別のリポジトリで管理され, サブモジュールでBlogのリポジトリに取り込む形を採用しました.  

`data/articles`には作者ごとのディレクトリが置かれており, その配下に作者のプロフィール情報が保存された`profile.json`と各記事のディレクトリが置かれています.  
記事は`index.md`というファイルで保存されており, マークダウン記法限定のBlogとなっていますが, メンバーのほとんどはマークダウン記法が使えるので大きな問題ではありません.  

> `fuga`という記事を`hoge`というユーザーで作成した場合のディレクトリ構成
> ```
> ├ README.md
> └ articles
>     └ hoge
>         ├ profile.json
>         └ fuga
>             └ index.md
> ```

[ブログの書き方](https://blog.growthers.dev/Growthers/posts/how-to-post/)より引用  

### 実装  

このBlogは`Next.js`のSSGを使って生成されており, ビルド時に記事へのパスとページが生成, マークダウンの変換には[react-markdown](https://github.com/remarkjs/react-markdown)を使用し, 複数のプラグインも導入しています.  

動的ルーティングのSSG対応(?)は開発初期に1人のメンバーがすべてやってくれたため, 記事部分に細かい機能を加えるための時間がかなり確保できたと思います.  

- URLを新規タブで開くように
- OGP表示
- 記事の更新日付の自動取得

#### URLを新規タブで開くように  

ライブラリで変換された`a`タグは同一タブで開くようになってしまっているため, 新規タブで開くように変更しています.  

#### OGP表示  

[ogp-parser](https://github.com/ukyoda/ogpParser)を使用してサイトのタイトルなどを取得, 記事の行間に挿入しています.  

#### 記事の更新日付の自動取得  

[gitlog](https://github.com/domharrington/node-gitlog)を使用してGitのlogから記事の更新日を取得, 記事の先頭に表示させています.  

### 今後  

現在記事内すべてのURLにOGP表示を行っていますが, URLの次行にOGPコンテンツを強制的に挿入させているため, テーブルやコードブロック内に挿入され見た目が崩れてしまいました.  

これ以外にも問題点はあるので, 徐々に修正を行っていきたいと思います.  

## 感想  

大したことが書けませんでしたが, ひとまずBlogが形になってよかったと思います.  
gitのサブモジュールは使ったことがなかったのでいい経験になりました.  
